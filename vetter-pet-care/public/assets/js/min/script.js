!function(e){function t(t){return""==e(".petFirstName[data-petid="+t+"]").val()?(e(".petSave[data-petid="+t+"]").prop("disabled",!0),!1):4!=e(".birth_year[data-petid="+t+"]").val().length?(e(".petSave[data-petid="+t+"]").prop("disabled",!0),!1):e(".species[data-petid="+t+"]:checked").length<1?(e(".petSave[data-petid="+t+"]").prop("disabled",!0),!1):""==e(".breed[data-petid="+t+"]").val()?(e(".petSave[data-petid="+t+"]").prop("disabled",!0),!1):e(".gender[data-petid="+t+"]:checked").length<1?(e(".petSave[data-petid="+t+"]").prop("disabled",!0),!1):e(".spayedOrNeutered[data-petid="+t+"]:checked").length<1?(e(".petSave[data-petid="+t+"]").prop("disabled",!0),!1):e(".aggressiveBehavior[data-petid="+t+"]:checked").length<1||"yes"==e(".aggressiveBehavior[data-petid="+t+"]:checked").val()&&""==e(".detailAboutAggressiveBehaviortext[data-petid="+t+"]").val()?(e(".petSave[data-petid="+t+"]").prop("disabled",!0),!1):void e(".petSave[data-petid="+t+"]").prop("disabled",!1)}function a(t){if(0!=e("#vetaccount").length)var a=e(".vet");else a=e(".box");var i=!1;a.on("dragenter",function(e){console.log("drag"),e.stopPropagation(),e.preventDefault()}),a.on("dragover",function(e){e.stopPropagation(),e.preventDefault()}),a.on("drop",function(a){if("pets"==e(this).data("name"))var d=e(".pet_dragandrophandler[data-petid="+t+"]").find('input[type="file"]'),n=e(".pet_dragandrophandler[data-petid="+t+"]").find("label");else if("vet"==e(this).data("name")){console.log("in vet");d=e(".vet_dragandrophandler").find('input[type="file"]'),n=e(".vet_dragandrophandler").find("label")}else{d=e(".petemr_dragandrophandler").find('input[type="file"]'),n=e(".petemr_dragandrophandler").find("label");e(".petEMRupload").prop("disabled",!1)}var r;console.log(d),a.preventDefault(),i=a.originalEvent.dataTransfer.files,d.prop("files",a.originalEvent.dataTransfer.files),r=i,0!=e("#vetaccount").length?n.text(r.length>1?(d.attr("data-multiple-caption")||"").replace("{count}",r.length):"Change Photo"):void 0===t?n.text(r.length>1?(d.attr("data-multiple-caption")||"").replace("{count}",r.length):r[0].name):n.text(r.length>1?(d.attr("data-multiple-caption")||"").replace("{count}",r.length):"Change Photo")}),a.on("change",function(a){if("pets"==e(this).data("name"))var i=e(".pet_dragandrophandler[data-petid="+t+"]").find('input[type="file"]'),d=e(".pet_dragandrophandler[data-petid="+t+"]").find("label");else if("vet"==e(this).data("name")){console.log("in vet");i=e(".vet_dragandrophandler").find('input[type="file"]'),d=e(".vet_dragandrophandler").find("label")}else i=e(".petemr_dragandrophandler").find('input[type="file"]'),d=e(".petemr_dragandrophandler").find("label");if(a.target.files&&a.target.files[0]){var n=new FileReader;n.onload=function(a){0!=e("#vetaccount").length?e(".addpetpreview").attr("src",a.target.result):e(".addpetpreview[data-petid="+t+"]").attr("src",a.target.result)},n.readAsDataURL(a.target.files[0])}var r;r=a.target.files,0!=e("#vetaccount").length?d.text(r.length>1?(i.attr("data-multiple-caption")||"").replace("{count}",r.length):"Change Photo"):void 0===t?d.text(r.length>1?(i.attr("data-multiple-caption")||"").replace("{count}",r.length):r[0].name):d.text(r.length>1?(i.attr("data-multiple-caption")||"").replace("{count}",r.length):"Change Photo")}),e(document).on("dragenter",function(e){e.stopPropagation(),e.preventDefault()}),e(document).on("dragover",function(e){e.stopPropagation(),e.preventDefault()}),e(document).on("drop",function(e){e.stopPropagation(),e.preventDefault()})}if(e(function(){var i;function d(e){classie.add(e.target.parentNode,"input--filled")}function n(e){""===e.target.value.trim()&&classie.remove(e.target.parentNode,"input--filled")}e(".numpets").hide(),e(".savecontinuepet:enabled").click(function(t){if(t.preventDefault(),"schedule"==e(this).data("flow")){var a=e(this).data("num"),i=e("input:checkbox:checked").length;if(i<a||i>a||!e(".confirm_pet").hasClass("confirmed"))return alert('The number of pets scheduled for the appointment must match the number checked in the "Select Pets" section. Please adjust and press Confirm before pressing the Continue button.'),!1;e.ajax({async:!1,type:"POST",url:"api/setTab",data:{tab:2},success:function(e){window.location.href="/billing"}})}else window.location.href="/billing"}),e("#tos-modal").hide(),e("#tos").click(function(t){t.preventDefault(),e("#tos-modal").show(),e("body").css("overflow","hidden")}),e(".tos-Modal-close").click(function(){e("#tos-modal").hide(),e("body").css("overflow","auto")}),e("#modnum").click(function(t){t.preventDefault(),e(".numpets").is(":visible")?e(".numpets").hide():e(".numpets").show()}),e(".petSelected").change(function(t){var a=e(this).data("num");e(".confirm_pet").removeClass("confirmed"),e(".pet-error").html("");var i=e("input:checkbox:checked").length;i==a&&e("input:checkbox:not(:checked)").prop("disabled",!0),i<a&&e("input:checkbox:not(:checked)").prop("disabled",!1)}),e(".confirm_pet").click(function(t){var a=e(this).data("num"),i=e("input:checkbox:checked").length,d="";return d=a<2?"pet.":"pets.",i<a?(e(".pet-error").html("<p>You must select "+a+" "+d),!1):i>a?(e("input:checkbox").prop("checked",!1),e(".pet-error").html("<p>You can only select "+a+" "+d),!1):void(localStorage.confirmedpet="yes")}),e(".confirm_pet").length&&e(".confirm_pet").hasClass("confirmed")&&"yes"==localStorage.confirmedpet&&(e("html, body").animate({scrollTop:e("#jumptoemr").offset().top},1300),localStorage.removeItem("confirmedpet")),e(".numpets").change(function(t){t.preventDefault();var a=e("#numSelected").val(),i=e(this).val();if(console.log(a+" "+i),1==a&&i>1){alert("Hi! We want to make sure our vets can meet the needs of your pets. We are redirecting you back to the Schedule so that we can ensure a more appropriate appointment window.");var d={entryId:localStorage.getItem("bookingid")};e.ajax({context:this,type:"post",dataType:"json",data:d,url:"/actions/discounts/deleteHold",success:function(t,a){localStorage.clear(),e.get("api/killsess",function(e){window.location.href="/schedule"})}}),localStorage.clear(),e.get("api/killsess",function(e){window.location.href="/schedule"})}else e.ajax({async:!1,type:"POST",url:"api/modpets",data:{modnum:i},success:function(e){window.location.href="/petinfo"}})}),e(".back").click(function(e){e.preventDefault();var t=window.location,a=String(t).split("/");switch(a.pop()||a.pop()){case"petinfo":destination="/basicinfo";break;case"billing":destination="/petinfo"}window.location.href=destination}),e("#cellphone, #alt_phone, #billcellphone").inputmask({mask:"###-###-####",greedy:!1,definitions:{"#":{validator:"[0-9]",cardinality:1}},placeholder:""}),e(".basic").submit(function(t){var a=0;if("schedule"==e(".basicsubmit").data("flow")){var i=e.trim(e("#selectedZip").val());if(i.length>0)if(i!=e.trim(e("#customerZip option:selected").text())){if(!confirm("The Zip Code in your address does not match the Zip Code you selected during scheduling. Click Cancel to modify your address Zip Code on this page, or OK to return to the Schedule and select a new Zip Code."))return!1;a=1;var d={entryId:localStorage.getItem("bookingid")};e.ajax({context:this,type:"post",dataType:"json",data:d,url:"/actions/discounts/deleteHold",success:function(t,a){localStorage.clear(),e.get("api/killsess",function(e){window.location.href="/schedule"})}}),localStorage.clear(),e.get("api/killsess",function(e){})}}if(e("#streetaddress").val().trim().length<1&&(e("#streetaddress").parent().addClass("field-error"),e("#error_streetaddress").html("Street Address is required."),a=1),e("#cellphone").val().trim().length<1&&(e("#cellphone").parent().addClass("field-error"),e("#error_cellphone").html("Cell Phone is required."),a=1),e("#city").val().trim().length<1&&(e("#city").parent().addClass("field-error"),e("#error_city").html("City is required."),a=1),e("#states").val().trim().length<1&&(e("#states").parent().addClass("field-error"),e("#error_states").html("State is required."),a=1),e("#customerZip").val().trim().length<1&&(e("#customerZip").parent().addClass("field-error"),e("#error_customerZip").html("Zipcode is required."),a=1),!(a<1))return!1;e.ajax({async:!1,type:"POST",url:"api/setTab",data:{tab:1},success:function(t){e(this).submit(0)}})}),e(".basic_user").submit(function(t){var a=0;if(e("#firstName").val().trim().length<1&&(e("#firstName").parent().addClass("field-error"),e("#error_firstName").html("First Name is required."),a=1),e("#lastName").val().trim().length<1&&(e("#lastName").parent().addClass("field-error"),e("#error_lastName").html("Last Name is required."),a=1),e("#email").val().trim().length<1&&(e("#email").parent().addClass("field-error"),e("#error_email").html("Email is required."),a=1),e("#streetaddress").val().trim().length<1&&(e("#streetaddress").parent().addClass("field-error"),e("#error_streetaddress").html("Street Address is required."),a=1),e("#cellphone").val().trim().length<1&&(e("#cellphone").parent().addClass("field-error"),e("#error_cellphone").html("Cell Phone is required."),a=1),e("#city").val().trim().length<1&&(e("#city").parent().addClass("field-error"),e("#error_city").html("City is required."),a=1),e("#c_states").val().trim().length<1&&(e("#states").parent().addClass("field-error"),e("#error_states").html("State is required."),a=1),e("#customerZip").val().trim().length<1&&(e("#customerZip").parent().addClass("field-error"),e("#error_customerZip").html("Zipcode is required."),a=1),!(a<1))return!1;e(this).submit(0)}),e(".remove-pet").click(function(t){if(t.preventDefault(),!confirm("Are you sure you want to delete this pet? "))return!1;var a=e(this).data("field"),i=e(this).data("asset"),d=e(this).data("petid"),n=(e(this),e('input[name="csrf_token_name"]').val(),{fieldId:a,assetId:i});e.ajax({async:!1,type:"POST",url:"/actions/updateMatrix/delete_pet",data:n,success:function(t){e("div.pet[data-petid="+d+"]").remove(),e("div.petinfo[data-petid="+d+"]").remove(),location.reload()}})}),e(".remove-emr").click(function(t){if(t.preventDefault(),!confirm("Are you sure you want to delete this file? "))return!1;var a=e(this).data("field"),i=e(this).data("asset"),d=e(this).data("recordid");e(this),e('input[name="csrf_token_name"]').val();e("div.exist_petrecord[data-recordid="+d+"]").remove();var n={fieldId:a,assetId:i};e.ajax({async:!1,type:"POST",url:"/actions/updateMatrix/delete_pet",data:n,success:function(e){}})}),e(".eachPet").click(function(i){i.preventDefault();var d=e(this).data("petid");t(d),e(".newpet[data-petid="+d+"]").removeClass("hidden"),a(d),e(".eachPet").addClass("hidden-important"),e(".pet").addClass("hidden"),e(".inactivePet").addClass("hidden-important")}),e(".cancelCreatePet").click(function(t){t.preventDefault();var a=e(this).data("petid");e(".newpet[data-petid="+a+"]").addClass("hidden"),e(".eachPet").removeClass("hidden-important"),e(".pet").removeClass("hidden"),e(".eachPet").removeClass("hidden"),e(".inactivePet").removeClass("hidden-important"),e(".editpetpicture").remove()}),String.prototype.trim||(i=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(i,"")}),[].slice.call(document.querySelectorAll(".input__field--yoshiko")).forEach(function(e){""!==e.value.trim()&&classie.add(e.parentNode,"input--filled"),e.addEventListener("focus",d),e.addEventListener("blur",n)})}),a(),e(".addDescription").toggle(function(){e(".addDescriptionText").slideup}),e("#useremail").change(function(t){t.preventDefault(),e(".password").removeClass("hidden").addClass("showme")}),e("#useremail").click(function(){console.log("click on user email")}),e(".birth_month").change(function(){switch(petid=e(this).data("petid"),e("select.birth_day[data-petid="+petid+"]").empty(),e.trim(e("select.birth_month[data-petid="+petid+"]").val())){case"01":case"03":case"05":case"07":case"08":case"10":case"12":for(i=1;i<=31;i++)i<10&&(tstr="0",i=tstr+i),e("select.birth_day[data-petid="+petid+"]").append("<option value="+i+">"+i+"</option>");break;case"04":case"06":case"09":case"11":for(i=1;i<=30;i++)i<10&&(tstr="0",i=tstr+i),e("select.birth_day[data-petid="+petid+"]").append("<option value="+i+">"+i+"</option>");break;case"02":for(i=1;i<=28;i++)i<10&&(tstr="0",i=tstr+i),e("select.birth_day[data-petid="+petid+"]").append("<option value="+i+">"+i+"</option>");break;default:for(i=1;i<=30;i++)i<10&&(tstr="0",i=tstr+i),e("select.birth_day[data-petid="+petid+"]").append("<option value="+i+">"+i+"</option>")}e("input.birthdate[data-petid="+petid+"]").val(e.trim(e("input.birth_year[data-petid="+petid+"]").val())+"-"+e.trim(e("select.birth_month[data-petid="+petid+"]").val())+"-"+e.trim(e("select.birth_day[data-petid="+petid+"]").val()))}),e(".birth_day").change(function(){petid=e(this).data("petid"),e("input.birthdate[data-petid="+petid+"]").val(e.trim(e("input.birth_year[data-petid="+petid+"]").val())+"-"+e.trim(e("select.birth_month[data-petid="+petid+"]").val())+"-"+e.trim(e("select.birth_day[data-petid="+petid+"]").val()))}),e(".birth_year").keyup(function(){petid=e(this).data("petid"),e("input.birthdate[data-petid="+petid+"]").val(e.trim(e("input.birth_year[data-petid="+petid+"]").val())+"-"+e.trim(e("select.birth_month[data-petid="+petid+"]").val())+"-"+e.trim(e("select.birth_day[data-petid="+petid+"]").val()))}),e(".birthdate").change(function(){console.log(e(this).val())}),e(".1year").change(function(){petid=e(this).parent().siblings("div.inputbirthdate").data("petid"),"yes"==e(this).val()?(e(this).next().removeAttr("checked"),e(".inputbirthdate[data-petid="+petid+"]").removeClass("hidden"),e(".calculatebirthdate[data-petid="+petid+"]").hasClass("hidden")||e(".calculatebirthdate[data-petid="+petid+"]").addClass("hidden")):(e(this).prev().removeAttr("checked"),e(".calculatebirthdate[data-petid="+petid+"]").removeClass("hidden"),e(".inputbirthdate[data-petid="+petid+"]").hasClass("hidden")||e(".inputbirthdate[data-petid="+petid+"]").addClass("hidden"),""!=e(".age[data-petid="+petid+"]").val()&&e(".inputbirthdate[data-petid="+petid+"]").removeClass("hidden"),e("input.birthdate[data-petid="+petid+"]").val(e.trim(e("input.birth_year[data-petid="+petid+"]").val())+"-"+e.trim(e("select.birth_month[data-petid="+petid+"]").val())+"-"+e.trim(e("select.birth_day[data-petid="+petid+"]").val())))}),e(".calculatebirthdate").keyup(function(){petid=e(this).data("petid"),currentyear=(new Date).getFullYear(),e(".inputbirthdate[data-petid="+petid+"]").removeClass("hidden"),isNaN(parseInt(e("input.age[data-petid="+petid+"]").val()))||e("input.birth_year[data-petid="+petid+"]").val(currentyear-parseInt(e("input.age[data-petid="+petid+"]").val())),e("input.birthdate[data-petid="+petid+"]").val(e.trim(e("input.birth_year[data-petid="+petid+"]").val())+"-"+e.trim(e("select.birth_month[data-petid="+petid+"]").val())+"-"+e.trim(e("select.birth_day[data-petid="+petid+"]").val()))}),e(".aggressiveBehavior").click(function(t){var a=e(this).attr("name");petid=e(this).data("petid"),"yes"==e("input[name='"+a+"']:checked").val()?e(".detailAboutAggressiveBehavior[data-petid="+petid+"]").removeClass("hidden"):(e(".detailAboutAggressiveBehavior[data-petid="+petid+"]").addClass("hidden"),e(".detailAboutAggressiveBehaviortext[data-petid="+petid+"]").val(""))}),e(".vet_cancel_init").click(function(t){console.log("in vet_cancel_init");var a=e(this).data("id"),i=e(this).data("start"),d=e(this).data("displaystart"),n=e(this).data("zip"),r=e(this).data("vetname"),o=e(this).data("vid"),l=new Date(i),s=Date.now(),c=Math.floor(Math.abs(l-s)/36e5);if(console.log(c),console.log(l),console.log(s),!confirm("Are you sure you want to cancel? If cancelling within 48 hours of appointment start time, you'll be charged a $25 fee."))return!1;c<12?(console.log(i),e.ajax({type:"POST",async:!1,url:"/actions/displacedAppointments/vetCancelLessThan",data:{entryid:a,start:i,vetid:o,displaystart:d},success:function(t){e(".vet_cancel_init[data-id="+a+"]").text("Cancelled"),e(".vet_cancel_init[data-id="+a+"]").removeAttr("href"),location.reload()}})):e.ajax({type:"POST",async:!1,url:"/api/checkforavail.html",data:{entryid:a,start:i,zip:n,vetname:r,vetid:o,displaystart:d},success:function(t){if("unavailable"==t[0].status){var a=t[0].entryid,i=t[0].status,n=e(this).data("vid"),r={entryid:a,status:i,vetid:n};e.ajax({type:"POST",async:!1,url:"/actions/displacedAppointments/entrySubmit",data:r,success:function(t){location.reload(),e(".vet_cancel_init[data-id="+a+"]").text("Cancelled"),e(".vet_cancel_init[data-id="+a+"]").removeAttr("href")}})}else if("available"==t[0].status){a=t[0].entryid,i=t[0].status;var o=t[0].vetname;n=t[0].userid,r={entryid:a,status:i,vetname:o,userid:n,displaystart:d,mode:"auto"};e.ajax({type:"POST",async:!1,url:"/actions/displacedAppointments/rebook",data:r,success:function(t){location.reload(),e(".vet_cancel_init[data-id="+a+"]").text("Cancelled"),e(".vet_cancel_init[data-id="+a+"]").removeAttr("href")}})}}}),t.preventDefault()}),e(".customer_cancel_appt").click(function(t){var a=new Date(e(this).data("start")),i=Date.now();Math.floor(Math.abs(a-i)/36e5);if(!confirm("Are you sure you want to cancel this appointment? If cancelling within 24 hours of appointment start time, you'll be charged a $95 fee."))return!1;var d=e(this).data("id"),n=e(this).data("start"),r=e(this).data("vetname"),o={entryid:d,start:n,vetname:r};e.ajax({type:"POST",url:"/actions/displacedAppointments/customerCancel",data:o,success:function(t){console.log(t),e("a[data-id="+d+"]").remove(),e(".cancel-appt[data-id="+d+"]").html("Cancelled"),location.reload()}})}),e(".edit-pet").click(function(i){i.preventDefault(),e(".pet").addClass("hidden"),e(".eachPet").addClass("hidden");var d=e(this).data("petid");e(".petnum[data-petid="+d+"]").removeClass("hidden");e(this).data("image");t(d);var n=e("div.petinfo[data-petid="+d+"]");return a(d),n.slideDown(),!1}),e(".petinfo").on("change keyup blur input",function(){t(e(this).data("petid"))}),e(".newpet").on("change keyup blur input",function(){t(e(this).data("petid"))}),e(".addpet").click(function(t){return e(".create_pet_clone").clone(!0,!0).removeClass("hidden").appendTo(".createPet"),a(),e(".createPet").slideDown(),e(".addpet").addClass("hidden"),e(".canceladdpet").removeClass("hidden"),!1}),e(".canceladdpet").click(function(t){return e(".addpet").removeClass("hidden"),e(".createPet").empty(),e(".canceladdpet").addClass("hidden"),!1}),e(".cancelpet").click(function(e){return!1}),e(".addadescriptionlink").click(function(t){return recordid=e(this).data("recordid"),e("div.emrDescription[data-recordid="+recordid+"]").slideToggle(),!1}),e(".inputfile").change(function(t){t.preventDefault(),e(".petEMRupload").prop("disabled",!1)}),e(".emrDescription").keyup(function(t){t.preventDefault(),e(".emrSave").prop("disabled",!1)}),localStorage.getItem("cur_time"))d=localStorage.getItem("cur_time");else var d=new Date(Date.parse(new Date)+1296e6);!function(t,a){if(document.getElementById(t)){var i=document.getElementById(t),d=i.querySelector(".minutes"),n=i.querySelector(".seconds"),r=0;function o(){var t=function(e){var t=Date.parse(e)-Date.parse(new Date),a=Math.floor(t/1e3%60);return{total:t,minutes:Math.floor(t/1e3/60%15),seconds:a}}(a);if(t.minutes<1&&t.seconds<1&&r>0){alert("Your appointment booking time has expired, and the time slot you chose has been surrendered. By clicking OK, you will be redirected back to the Schedule to restart the booking process.");var i={entryId:localStorage.getItem("bookingid")};e.ajax({context:this,type:"post",dataType:"json",data:i,url:"/actions/discounts/deleteHold",success:function(t,a){localStorage.clear(),e.get("api/killsess",function(e){window.location.href="/schedule",clearInterval(l)})}}),localStorage.clear(),e.get("api/killsess",function(e){window.location.href="/schedule",clearInterval(l)})}else d.innerHTML=("0"+t.minutes).slice(-2),n.innerHTML=("0"+t.seconds).slice(-2),localStorage.setItem("cur_time",a);r++}o();var l=setInterval(o,1e3)}}("clockdiv",d),e(".ac-container .ac-body").hide(),e(".ac-container .ac-title").on("click",function(t){e(this).toggleClass("minus"),e(this).next(".ac-body").slideToggle()})}(jQuery);